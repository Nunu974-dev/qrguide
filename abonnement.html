<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abonnement - QRGUIDE.FR</title>
    <meta name="description" content="Choisissez votre formule QRGUIDE et cr√©ez votre guide num√©rique personnalis√© pour location saisonni√®re ou h√¥tel.">
    <link rel="icon" type="image/jpeg" href="img/logo_icone.jpg">
    <link rel="stylesheet" href="style.css?v=2">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Pr√©-warmup du backend TR√àS T√îT - TRIPLE TENTATIVE -->
    <script>
        (function() {
            const BACKEND_URL = 'https://qrguide-backend.onrender.com';
            console.log('üî•üî•üî• Pr√©-warmup TRIPLE backend (avant chargement page)...');
            
            // Lancer 3 requ√™tes en parall√®le pour maximiser les chances
            Promise.all([
                fetch(BACKEND_URL + '/health', { method: 'GET' }).catch(() => null),
                fetch(BACKEND_URL + '/create-checkout-session', { method: 'OPTIONS' }).catch(() => null),
                fetch(BACKEND_URL + '/health', { method: 'GET' }).catch(() => null)
            ]).then(() => console.log('‚úÖ Pr√©-warmup TRIPLE termin√©'))
              .catch(() => console.log('‚ö†Ô∏è Pr√©-warmup timeout'));
        })();
    </script>
    
    <style>
        /* Style pour les options de nombre de logements */
        .logement-option {
            transition: all 0.3s ease;
            position: relative;
        }
        .logement-option:hover {
            border-color: var(--primary-color) !important;
            background: rgba(199, 169, 97, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .logement-option:has(input[type="radio"]:checked) {
            border-color: var(--primary-color) !important;
            border-width: 3px !important;
            background: linear-gradient(to bottom, rgba(199, 169, 97, 0.08), white);
            box-shadow: 0 4px 20px rgba(199, 169, 97, 0.3);
        }
        
        /* Style pour les options de format de plaque - identique aux cartes de formule */
        .format-option {
            transition: all 0.3s ease;
            position: relative;
        }
        .format-option:hover {
            border-color: var(--primary-color) !important;
            background: rgba(199, 169, 97, 0.05);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .format-option:has(input[type="radio"]:checked) {
            border-color: var(--primary-color) !important;
            border-width: 3px !important;
            background: linear-gradient(to bottom, rgba(199, 169, 97, 0.08), white);
            box-shadow: 0 4px 20px rgba(199, 169, 97, 0.3);
        }
        .format-option input[type="radio"]:checked ~ * {
            /* Ajouter un effet visuel suppl√©mentaire si n√©cessaire */
        }
        
        /* Cacher les fl√®ches natives du input number */
        #plaque-quantity::-webkit-outer-spin-button,
        #plaque-quantity::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        #plaque-quantity {
            -moz-appearance: textfield;
        }
        
        /* Responsive pour les 4 √©tapes et FAQ */
        @media (max-width: 768px) {
            .faq-grid {
                grid-template-columns: 1fr !important;
            }
        }
        @media (max-width: 992px) {
            div[style*="grid-template-columns: repeat(4, 1fr)"] {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
    </style>
    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="firebase-config.js"></script>
    <!-- EmailJS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="index.html"><img src="img/logo.png" alt="QRGUIDE.FR" class="logo"></a>
                <button class="mobile-menu-toggle" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="nav-links">
                    <a href="index.html#fonctionnalites">Fonctionnalit√©s</a>
                    <a href="index.html#comment-ca-marche">Comment √ßa marche</a>
                    <a href="tarifs.html">Tarifs</a>
                    <a href="hotels.html">H√¥tels</a>
                    <a href="contact.html">Contact</a>
                    <a href="login.html" style="margin-right: 12px;">Se connecter</a>
                    <a href="abonnement.html" class="btn-primary">S'abonner</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Contact Hero -->
    <section class="contact-hero">
        <div class="container">
            <h1>Commencez d√®s aujourd'hui</h1>
            <p>Remplissez le formulaire et recevez votre guide personnalis√© en 48h</p>
            
            <div class="trust-badges">
                <div class="trust-item">
                    <span class="trust-icon">‚úì</span>
                    <span>R√©ponse sous 24h</span>
                </div>
                <div class="trust-item">
                    <span class="trust-icon">‚úì</span>
                    <span>Sans engagement</span>
                </div>
                <div class="trust-item">
                    <span class="trust-icon">‚úì</span>
                    <span>Installation en 48h</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Form Section -->
    <section class="contact-section">
        <div class="container" style="max-width: 900px;">
            <div style="max-width: 100%;">
                <!-- Form -->
                <div class="contact-form-wrapper" style="max-width: 100%;">
                    <form class="contact-form" id="contactForm">
                        <!-- S√©lection du nombre de logements -->
                        <div style="text-align: center; margin-bottom: 32px;">
                            <h3 style="font-size: 1.3rem; margin-bottom: 16px; color: var(--text-dark);">Combien de logements souhaitez-vous √©quiper ?</h3>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; max-width: 600px; margin: 0 auto;">
                                <label class="logement-option" style="padding: 20px; border: 2px solid #e9ecef; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; text-align: center;">
                                    <input type="radio" name="nb-logements" value="1-3" checked style="margin-right: 8px;">
                                    <div>
                                        <strong style="font-size: 1.1rem; color: var(--text-dark); display: block; margin-bottom: 4px;">1 √† 3 logements</strong>
                                        <small style="color: #666;">Commander directement</small>
                                    </div>
                                </label>
                                <label class="logement-option" style="padding: 20px; border: 2px solid #e9ecef; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; text-align: center;">
                                    <input type="radio" name="nb-logements" value="4+" style="margin-right: 8px;">
                                    <div>
                                        <strong style="font-size: 1.1rem; color: var(--text-dark); display: block; margin-bottom: 4px;">4+ logements</strong>
                                        <small style="color: #666;">Demander un devis</small>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Formulaire de commande (1-3 logements) -->
                        <div id="order-form" style="display: block;">
                            <div style="text-align: center; margin-bottom: 40px;">
                                <h2 style="font-size: 2rem; margin-bottom: 12px; color: var(--text-dark);">Choisissez votre formule</h2>
                                <p style="font-size: 1.1rem; color: #666;">Le pack cr√©ation est inclus avec tous les abonnements</p>
                            </div>

                        <div class="pricing-cards">
                            <label class="pricing-card" id="card-mensuel">
                                <input type="radio" name="plan" value="mensuel" id="plan-mensuel" checked>
                                <div class="card-header">
                                    <h4>Abonnement Mensuel</h4>
                                </div>
                                <div class="card-price">
                                    <span class="price-main">8‚Ç¨</span>
                                    <span class="price-period">/mois</span>
                                </div>
                                <div class="card-economy" style="opacity: 0; visibility: hidden; height: 40px;"></div>
                                <div class="card-features">
                                    <div class="feature">‚úì Pack cr√©ation inclus (150‚Ç¨)</div>
                                    <div class="feature">‚úì Modifications illimit√©es</div>
                                    <div class="feature">‚úì Support prioritaire</div>
                                </div>
                                <div class="card-total">
                                    Premier paiement : <strong>158‚Ç¨</strong>
                                </div>
                            </label>

                            <label class="pricing-card recommended" id="card-annuel">
                                <input type="radio" name="plan" value="annuel" id="plan-annuel">
                                <div class="card-header">
                                    <div class="badge-popular">üíé Meilleur prix</div>
                                    <h4>Abonnement Annuel</h4>
                                </div>
                                <div class="card-price">
                                    <span class="price-main">75‚Ç¨</span>
                                    <span class="price-period">/an</span>
                                </div>
                                <div class="card-economy">√âconomisez 21‚Ç¨/an</div>
                                <div class="card-features">
                                    <div class="feature">‚úì Pack cr√©ation inclus (150‚Ç¨)</div>
                                    <div class="feature">‚úì Modifications illimit√©es</div>
                                    <div class="feature">‚úì Support prioritaire</div>
                                </div>
                                <div class="card-total">
                                    Premier paiement : <strong>225‚Ç¨</strong>
                                </div>
                            </label>
                        </div>

                        <!-- Pack Cr√©ation D√©tails -->
                        <div style="max-width: 900px; margin: 40px auto; padding: 32px; background: #f8f9fa; border-radius: 16px; border: 2px solid #e9ecef;">
                            <h3 style="text-align: center; margin-bottom: 24px; color: var(--text-dark);">üì¶ Ce qui est inclus dans le Pack Cr√©ation (150‚Ç¨)</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <span style="color: var(--primary-color); font-size: 1.2rem;">‚úì</span>
                                    <div>
                                        <strong>Acc√®s √† votre espace personnel</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 0.9rem; color: #666;">Cr√©ez votre guide en autonomie</p>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <span style="color: var(--primary-color); font-size: 1.2rem;">‚úì</span>
                                    <div>
                                        <strong>QR code personnalis√©</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 0.9rem; color: #666;">Fichier PDF haute qualit√©</p>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <span style="color: var(--primary-color); font-size: 1.2rem;">‚úì</span>
                                    <div>
                                        <strong>16 sections configurables</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 0.9rem; color: #666;">Wi-Fi, √©quipements, recommandations...</p>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <span style="color: var(--primary-color); font-size: 1.2rem;">‚úì</span>
                                    <div>
                                        <strong>Int√©gration compl√®te</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 0.9rem; color: #666;">Photos, cartes, vid√©os</p>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <span style="color: var(--primary-color); font-size: 1.2rem;">‚úì</span>
                                    <div>
                                        <strong>Modifications illimit√©es</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 0.9rem; color: #666;">Mettez √† jour quand vous voulez</p>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: start; gap: 12px;">
                                    <span style="color: var(--primary-color); font-size: 1.2rem;">‚úì</span>
                                    <div>
                                        <strong>Jusqu'√† 3 logements</strong>
                                        <p style="margin: 4px 0 0 0; font-size: 0.9rem; color: #666;">G√©rez plusieurs propri√©t√©s</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: left; margin: 24px 0 8px 0;">
                            <h3 style="font-size: 1.5rem; margin-bottom: 4px; color: var(--text-dark);">Plaques QR Code professionnelles</h3>
                            <p style="font-size: 1rem; color: #666; margin: 0;">Optionnel - Ajoutez des plaques physiques √† votre commande</p>
                        </div>
                        
                        <div class="plaque-section" style="display: flex; gap: 5px; align-items: flex-start; background: #f8f9fa; padding: 24px; border-radius: 16px; border: 2px solid #e9ecef;">
                            <div class="plaque-image" style="flex: 0 0 320px;">
                                <img src="img/Qr guide exemple.png" alt="Plaque QR Code" style="width: 100%; border-radius: 12px; display: block;">
                            </div>
                            <div class="plaque-details" style="flex: 1; display: flex; flex-direction: column; justify-content: space-between; min-height: 100%;">
                                <div>
                                    <h4 style="font-size: 1.3rem; margin-bottom: 12px; color: var(--text-dark);">Plaque QR Code en PVC haute qualit√©</h4>
                                    <p style="color: #666; margin-bottom: 12px; line-height: 1.6;">
                                        ‚úì QR code grav√© haute d√©finition<br>
                                        ‚úì R√©sistant aux intemp√©ries<br>
                                        ‚úì Livraison gratuite en France
                                    </p>
                                    
                                    <!-- Choix du format -->
                                    <div style="margin-bottom: 16px;">
                                        <label style="font-weight: 600; color: var(--text-dark); margin-bottom: 8px; display: block;">Format :</label>
                                        <div style="display: flex; gap: 12px;">
                                            <label style="flex: 1; padding: 12px; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: space-between; transition: all 0.3s ease;" class="format-option">
                                                <input type="radio" name="plaque-format" value="a4" checked onchange="calculateTotal()" style="margin-right: 8px;">
                                                <span style="flex: 1;">
                                                    <strong>A4</strong><br>
                                                    <small style="color: #666;">21 x 29.7 cm</small>
                                                </span>
                                                <strong style="color: var(--primary-color);">45‚Ç¨</strong>
                                            </label>
                                            <label style="flex: 1; padding: 12px; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: space-between; transition: all 0.3s ease;" class="format-option">
                                                <input type="radio" name="plaque-format" value="a5" onchange="calculateTotal()" style="margin-right: 8px;">
                                                <span style="flex: 1;">
                                                    <strong>A5</strong><br>
                                                    <small style="color: #666;">14.8 x 21 cm</small>
                                                </span>
                                                <strong style="color: var(--primary-color);">35‚Ç¨</strong>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <p id="plaque-unit-price" style="color: var(--primary-color); font-weight: 700; font-size: 1.5rem; margin: 16px 0;">45‚Ç¨ <span style="font-weight: 400; font-size: 1rem; color: #666;">/ unit√©</span></p>
                                </div>
                                <div style="margin-top: 20px;">
                                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                                        <span style="font-weight: 600; color: var(--text-dark);">Quantit√© :</span>
                                        <div class="quantity-controls" style="display: flex; align-items: center; gap: 12px;">
                                            <button type="button" class="qty-btn-large" onclick="decrementPlaque()" style="width: 50px; height: 50px; border: 3px solid var(--primary-color); background: white; color: var(--primary-color); font-size: 1.8rem; border-radius: 10px; cursor: pointer; font-weight: 700;">‚àí</button>
                                            <input type="number" id="plaque-quantity" name="plaque-quantity" value="0" min="0" readonly style="width: 80px; text-align: center; font-size: 2rem; font-weight: 700; border: 2px solid #e9ecef; border-radius: 10px; padding: 8px; background: white;">
                                            <button type="button" class="qty-btn-large" onclick="incrementPlaque()" style="width: 50px; height: 50px; border: 3px solid var(--primary-color); background: white; color: var(--primary-color); font-size: 1.8rem; border-radius: 10px; cursor: pointer; font-weight: 700;">+</button>
                                        </div>
                                    </div>
                                    <div class="plaque-total-display" style="background: white; padding: 16px; border-radius: 10px; border: 2px solid #e9ecef; text-align: center;">
                                        <span style="font-size: 1rem; color: #666;">Total plaques : </span>
                                        <strong id="plaqueTotal" style="font-size: 1.8rem; color: var(--primary-color);">0‚Ç¨</strong>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: left; margin: 40px 0 20px 0;">
                            <h3 style="font-size: 1.5rem; margin-bottom: 8px; color: var(--text-dark);">Vos informations</h3>
                            <p style="font-size: 1rem; color: #666; margin: 0;">Compl√©tez vos coordonn√©es pour finaliser votre commande</p>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="prenom">Pr√©nom *</label>
                                <input type="text" id="prenom" name="prenom" required>
                            </div>
                            <div class="form-group">
                                <label for="nom">Nom *</label>
                                <input type="text" id="nom" name="nom" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="email">Email *</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="telephone">T√©l√©phone *</label>
                                <input type="tel" id="telephone" name="telephone" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="ville">Code postal du logement *</label>
                                <input type="text" id="ville" name="ville" required>
                            </div>
                        </div>

                        <div style="text-align: left; margin: 32px 0 16px 0;">
                            <h3 style="font-size: 1.5rem; margin-bottom: 8px; color: var(--text-dark);">Votre logement</h3>
                            <p style="font-size: 1rem; color: #666; margin: 0;">Indiquez le type de logement</p>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="type">Type de logement *</label>
                                <select id="type" name="type" required>
                                    <option value="">S√©lectionnez...</option>
                                    <option value="appartement">Appartement</option>
                                    <option value="maison">Maison</option>
                                    <option value="villa">Villa</option>
                                    <option value="chalet">Chalet</option>
                                    <option value="studio">Studio</option>
                                    <option value="autre">Autre</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="nombre">Nombre exact de logements *</label>
                                <select id="nombre" name="nombre" required>
                                    <option value="">S√©lectionnez...</option>
                                    <option value="1">1 logement</option>
                                    <option value="2">2 logements</option>
                                    <option value="3">3 logements</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="message">Message (optionnel)</label>
                            <textarea id="message" name="message" rows="4" placeholder="Questions, demandes sp√©cifiques..."></textarea>
                        </div>

                        <div class="form-total">
                            <div class="total-label">Total premier paiement</div>
                            <div class="total-amount" id="totalAmount">158‚Ç¨</div>
                            <p style="font-size: 0.85rem; color: #666; margin-top: 8px;">Puis 8‚Ç¨/mois (ou 75‚Ç¨/an selon formule)</p>
                        </div>

                        <!-- What happens next -->
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 32px; border-radius: 16px; margin: 40px 0;">
                            <h3 style="color: white; text-align: center; margin-bottom: 24px; font-size: 1.5rem;">üöÄ D√©marrage instantan√©</h3>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                                <div style="text-align: center;">
                                    <div style="width: 48px; height: 48px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.3rem; margin: 0 auto 12px;">1</div>
                                    <strong style="display: block; margin-bottom: 6px;">Paiement valid√©</strong>
                                    <span style="opacity: 0.9; font-size: 0.9rem;">S√©curis√© par Stripe</span>
                                </div>
                                <div style="text-align: center;">
                                    <div style="width: 48px; height: 48px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.3rem; margin: 0 auto 12px;">2</div>
                                    <strong style="display: block; margin-bottom: 6px;">Email re√ßu</strong>
                                    <span style="opacity: 0.9; font-size: 0.9rem;">Vos identifiants de connexion</span>
                                </div>
                                <div style="text-align: center;">
                                    <div style="width: 48px; height: 48px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.3rem; margin: 0 auto 12px;">3</div>
                                    <strong style="display: block; margin-bottom: 6px;">Connexion</strong>
                                    <span style="opacity: 0.9; font-size: 0.9rem;">Acc√®s √† votre espace</span>
                                </div>
                                <div style="text-align: center;">
                                    <div style="width: 48px; height: 48px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.3rem; margin: 0 auto 12px;">4</div>
                                    <strong style="display: block; margin-bottom: 6px;">Cr√©ez votre guide</strong>
                                    <span style="opacity: 0.9; font-size: 0.9rem;">En totale autonomie</span>
                                </div>
                            </div>
                        </div>

                        <button type="submit" id="paymentBtn" class="btn-hero" style="width: 100%; padding: 20px; font-size: 1.2rem;">
                            üîí Paiement s√©curis√© par Stripe
                        </button>
                        
                        <p class="form-notice" style="text-align: center; margin-top: 20px;">
                            <strong>‚úì Paiement 100% s√©curis√©</strong> ‚Ä¢ <strong>‚úì Livraison gratuite</strong> ‚Ä¢ <strong>‚úì Sans engagement</strong>
                        </p>

                        <div style="text-align: center; margin-top: 24px; padding: 20px; background: #f8f9fa; border-radius: 12px;">
                            <p style="font-size: 0.95rem; color: #666; margin-bottom: 12px;">
                                Une question avant de commander ?
                            </p>
                            <a href="contact.html" class="btn-secondary" style="display: inline-block; text-decoration: none; padding: 12px 24px;">
                                üí¨ Contactez-nous
                            </a>
                        </div>
                        </div>
                        
                        <!-- Redirection vers contact (4+ logements) -->
                        <div id="quote-form" style="display: none;">
                            <div style="text-align: center; margin-bottom: 32px; padding: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; color: white;">
                                <h2 style="font-size: 2rem; margin-bottom: 16px; color: white;">Projet de 4 logements ou plus ?</h2>
                                <p style="font-size: 1.2rem; margin-bottom: 24px; opacity: 0.95;">Nous vous proposons une tarification personnalis√©e et des conditions avantageuses</p>
                                
                                <div style="background: rgba(255,255,255,0.15); padding: 24px; border-radius: 12px; margin: 24px 0;">
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; text-align: left;">
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <span style="font-size: 1.5rem;">‚úì</span>
                                            <span>Tarif d√©gressif</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <span style="font-size: 1.5rem;">‚úì</span>
                                            <span>Support d√©di√©</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <span style="font-size: 1.5rem;">‚úì</span>
                                            <span>Formation incluse</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <span style="font-size: 1.5rem;">‚úì</span>
                                            <span>Devis sous 24h</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <a href="contact.html" class="btn-hero" style="display: inline-block; background: white; color: var(--primary-color); padding: 18px 40px; font-size: 1.2rem; text-decoration: none; border-radius: 12px; font-weight: 700; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">
                                    üí¨ Demander un devis personnalis√©
                                </a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section class="faq-section" style="background: #f8f9fa; padding: 60px 0;">
        <div class="container">
            <h2>Questions fr√©quentes</h2>
            
            <div class="faq-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px;">
                <div class="faq-item">
                    <h4>Quelles informations fournir ?</h4>
                    <p>Vos coordonn√©es, adresse du logement, code Wi-Fi, √©quipements disponibles, bonnes adresses locales, r√®glement int√©rieur.</p>
                </div>
                <div class="faq-item">
                    <h4>Combien de temps pour la cr√©ation ?</h4>
                    <p>48h apr√®s r√©ception de toutes vos informations. Livraison par email avec lien vers votre guide.</p>
                </div>
                <div class="faq-item">
                    <h4>Puis-je modifier apr√®s cr√©ation ?</h4>
                    <p>Oui, vous avez acc√®s √† un panneau d'administration pour modifier tout le contenu en temps r√©el.</p>
                </div>
                <div class="faq-item">
                    <h4>Comment imprimer le QR code ?</h4>
                    <p>Nous vous fournissons un fichier PDF haute qualit√©. Vous pouvez l'imprimer ou commander notre plaque professionnelle.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <img src="img/logo_blanc.png" alt="QRGUIDE.FR" class="footer-logo">
                    <p>Le guide num√©rique nouvelle g√©n√©ration pour locations saisonni√®res et h√¥tels</p>
                </div>
                <div class="footer-col">
                    <h4>Produit</h4>
                    <a href="index.html#fonctionnalites">Fonctionnalit√©s</a>
                    <a href="index.html#comment-ca-marche">Comment √ßa marche</a>
                    <a href="tarifs.html">Tarifs</a>
                    <a href="demo-guide/index.html" target="_blank">Voir la d√©mo</a>
                </div>
                <div class="footer-col">
                    <h4>Support</h4>
                    <a href="contact.html">Contact</a>
                    <a href="mailto:contact@qrguide.fr">contact@qrguide.fr</a>
                    <a href="tel:0692630364">06 92 63 03 64</a>
                </div>
                <div class="footer-col">
                    <h4>L√©gal</h4>
                    <a href="mentions-legales.html">Mentions l√©gales</a>
                    <a href="cgv.html">CGV</a>
                    <a href="politique-confidentialite.html">Confidentialit√©</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 QRGUIDE.FR - Tous droits r√©serv√©s</p>
            </div>
        </div>
    </footer>

    <script>
        // ============================================
        // BASCULEMENT ENTRE FORMULAIRE COMMANDE ET REDIRECTION CONTACT
        // ============================================
        function toggleFormType() {
            const selection = document.querySelector('input[name="nb-logements"]:checked');
            if (!selection) {
                console.error('Aucune s√©lection trouv√©e');
                return;
            }
            
            const value = selection.value;
            const orderForm = document.getElementById('order-form');
            const quoteForm = document.getElementById('quote-form');
            
            console.log('Selection value:', value);
            console.log('Order form:', orderForm);
            console.log('Quote form:', quoteForm);
            
            if (value === '1-3') {
                if (orderForm) orderForm.style.display = 'block';
                if (quoteForm) quoteForm.style.display = 'none';
            } else if (value === '4+') {
                if (orderForm) orderForm.style.display = 'none';
                if (quoteForm) quoteForm.style.display = 'block';
            }
        }

        // Attacher les event listeners apr√®s le chargement du DOM
        document.addEventListener('DOMContentLoaded', function() {
            // Event listeners pour le basculement 1-3 / 4+ logements
            const logementsRadios = document.querySelectorAll('input[name="nb-logements"]');
            logementsRadios.forEach(radio => {
                radio.addEventListener('change', toggleFormType);
            });
        });

        // ============================================
        // CONFIGURATION - √Ä MODIFIER AVEC VOS CL√âS
        // ============================================
        
        // Configuration EmailJS (obtenir sur https://www.emailjs.com/)
        // INSTRUCTIONS :
        // ============================================
        // EMAIL AUTOMATIQUE APR√àS PAIEMENT
        // ============================================
        // L'email de confirmation avec identifiants de connexion est envoy√©
        // automatiquement par le backend via webhook Stripe apr√®s validation du paiement

        // ============================================
        // GESTION QUANTIT√â PLAQUES
        // ============================================
        function incrementPlaque() {
            const input = document.getElementById('plaque-quantity');
            input.value = parseInt(input.value) + 1;
            calculateTotal();
        }

        function decrementPlaque() {
            const input = document.getElementById('plaque-quantity');
            if (parseInt(input.value) > 0) {
                input.value = parseInt(input.value) - 1;
                calculateTotal();
            }
        }

        // ============================================
        // CALCUL DU TOTAL
        // ============================================
        function calculateTotal() {
            const plan = document.querySelector('input[name="plan"]:checked');
            const plaqueQty = parseInt(document.getElementById('plaque-quantity').value) || 0;
            const plaqueFormat = document.querySelector('input[name="plaque-format"]:checked');
            const plaquePrice = plaqueFormat && plaqueFormat.value === 'a5' ? 35 : 45;
            
            let total = 0;
            let description = [];

            if (plan) {
                // Abonnement
                if (plan.value === 'mensuel') {
                    total += 8;
                    description.push('8‚Ç¨/mois');
                } else if (plan.value === 'annuel') {
                    total += 75;
                    description.push('75‚Ç¨/an');
                }

                // Cr√©ation toujours incluse
                total += 150;
                description.push('Cr√©ation : 150‚Ç¨');
            }

            // Plaques (quantit√© variable avec prix selon format)
            if (plaqueQty > 0) {
                const plaqueCost = plaqueQty * plaquePrice;
                total += plaqueCost;
                const formatLabel = plaqueFormat.value === 'a5' ? 'A5' : 'A4';
                description.push(plaqueQty + ' plaque' + (plaqueQty > 1 ? 's' : '') + ' ' + formatLabel + ' : ' + plaqueCost + '‚Ç¨');
            }

            // Mettre √† jour l'affichage du prix unitaire
            document.getElementById('plaque-unit-price').innerHTML = plaquePrice + '‚Ç¨ <span style="font-weight: 400; font-size: 1rem; color: #666;">/ unit√©</span>';
            
            // Mettre √† jour l'affichage du total des plaques
            document.getElementById('plaqueTotal').textContent = (plaqueQty * plaquePrice) + '‚Ç¨';

            // Mettre √† jour seulement le montant total (le reste est dans le HTML)
            document.getElementById('totalAmount').textContent = total + '‚Ç¨';
        }

        // ============================================
        // R√âCUP√âRATION DES DONN√âES DU FORMULAIRE
        // ============================================
        function getFormData() {
            const plan = document.querySelector('input[name="plan"]:checked');
            const plaqueQty = parseInt(document.getElementById('plaque-quantity').value) || 0;
            const total = document.getElementById('totalAmount').textContent.split('‚Ç¨')[0];

            let options = 'Cr√©ation incluse';
            if (plaqueQty > 0) {
                options += ' + ' + plaqueQty + ' plaque' + (plaqueQty > 1 ? 's' : '');
            }

            return {
                prenom: document.getElementById('prenom').value,
                nom: document.getElementById('nom').value,
                email: document.getElementById('email').value,
                telephone: document.getElementById('telephone').value,
                ville: document.getElementById('ville').value,
                type: document.getElementById('type').value,
                nombre: document.getElementById('nombre').value,
                plan: plan ? plan.value : '',
                planLabel: plan ? plan.parentElement.querySelector('strong').textContent : '',
                options: options,
                message: document.getElementById('message').value,
                total: total + '‚Ç¨'
            };
        }

        // ============================================
        // EMAIL AUTOMATIQUE
        // ============================================
        // L'email avec identifiants est envoy√© automatiquement par le backend
        // apr√®s validation du paiement via webhook Stripe

        // ============================================
        // PAIEMENT STRIPE - AVEC BACKEND NODE.JS (comme Cinnad'moun)
        // ============================================

        // URL du backend Stripe (√† modifier apr√®s d√©ploiement sur Render.com)
        const BACKEND_URL = 'https://qrguide-backend.onrender.com';
        let backendReady = false;

        // ============================================
        // WARM-UP DU SERVEUR BACKEND (Render.com se met en veille)
        // STRAT√âGIE : Multiples requ√™tes en parall√®le + timeout 60s
        // ============================================
        async function warmupBackend() {
            try {
                console.log('üî•üî•üî• R√©veil INTENSIF du serveur backend...');
                const startTime = Date.now();
                
                // Timeout de 60 secondes pour Render.com gratuit
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 60000);
                
                // Faire 5 requ√™tes en parall√®le pour acc√©l√©rer le r√©veil
                const requests = [
                    fetch(`${BACKEND_URL}/health`, { method: 'GET', signal: controller.signal }),
                    fetch(`${BACKEND_URL}/create-checkout-session`, { method: 'OPTIONS', signal: controller.signal }),
                    fetch(`${BACKEND_URL}/health`, { method: 'GET', signal: controller.signal }),
                    fetch(`${BACKEND_URL}/create-checkout-session`, { method: 'OPTIONS', signal: controller.signal }),
                    fetch(`${BACKEND_URL}/health`, { method: 'GET', signal: controller.signal })
                ];
                
                // Attendre que AU MOINS une requ√™te r√©ussisse
                const response = await Promise.race(requests.map(r => r.catch(() => null)));
                
                clearTimeout(timeoutId);
                const duration = Date.now() - startTime;
                
                backendReady = true;
                if (response && response.ok) {
                    console.log(`‚úÖ Serveur backend pr√™t RAPIDEMENT (${duration}ms)`);
                } else {
                    console.log(`‚ö†Ô∏è Serveur backend r√©veill√© (${duration}ms)`);
                }
            } catch (error) {
                backendReady = true;
                console.log('‚ö†Ô∏è Timeout warmup apr√®s 60s, tentative quand m√™me');
            }
        }
        
        // Lancer IMM√âDIATEMENT, pas besoin d'attendre DOMContentLoaded
        warmupBackend();

        // Initialiser Stripe.js
        const stripe = Stripe('pk_test_51SfMI0IuJcG0yZsyft4aaNpPWOL1r8jmOzoiJY4i3ChsAraAkywvATuBSaQopIcYQov0De84WONpRBwJkZ46jcvP00m1x3EDLD');

        async function processPayment() {
            const plan = document.querySelector('input[name="plan"]:checked');
            const plaqueQty = parseInt(document.getElementById('plaque-quantity').value) || 0;

            if (!plan) {
                alert('Veuillez s√©lectionner une formule');
                return;
            }

            // Collecter les infos du formulaire
            const formData = getFormData();

            // D√©sactiver le bouton pendant le traitement
            const paymentBtn = document.getElementById('paymentBtn');
            paymentBtn.disabled = true;
            paymentBtn.innerHTML = '<span style="display: inline-block; animation: pulse 1.5s infinite;">‚è≥</span> V√©rification...';

            try {
                // 1. V√âRIFIER SI L'EMAIL EXISTE D√âJ√Ä
                console.log('üîç V√©rification email:', formData.email);
                
                const signInMethods = await firebase.auth().fetchSignInMethodsForEmail(formData.email);
                
                if (signInMethods && signInMethods.length > 0) {
                    // Le compte existe d√©j√†
                    alert('‚ùå Un compte existe d√©j√† avec cet email.\n\nVeuillez vous connecter ou utiliser une autre adresse email.');
                    paymentBtn.disabled = false;
                    paymentBtn.innerHTML = 'üí≥ Payer maintenant';
                    return;
                }
                
                console.log('‚úÖ Email disponible');
                
            } catch (error) {
                console.error('Erreur v√©rification email:', error);
                alert('‚ùå Erreur de v√©rification de l\'email. Veuillez r√©essayer.');
                paymentBtn.disabled = false;
                paymentBtn.innerHTML = 'üí≥ Payer maintenant';
                return;
            }
            
            // 2. Si le backend n'est pas encore pr√™t, attendre avec message informatif
            if (!backendReady) {
                paymentBtn.innerHTML = '<span style="display: inline-block; animation: pulse 1.5s infinite;">‚è≥</span> R√©veil du serveur (peut prendre 60s)...';
                
                // Attendre max 60 secondes
                const maxWait = 60000;
                const startWait = Date.now();
                
                while (!backendReady && (Date.now() - startWait) < maxWait) {
                    const elapsed = Math.floor((Date.now() - startWait) / 1000);
                    paymentBtn.innerHTML = `<span style="display: inline-block; animation: pulse 1.5s infinite;">‚è≥</span> R√©veil du serveur... (${elapsed}s)`;
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
            }
            
            paymentBtn.innerHTML = '<span style="display: inline-block; animation: pulse 1.5s infinite;">‚è≥</span> Connexion s√©curis√©e...';

            try {
                // 3. Appeler le backend pour cr√©er la session Stripe
                const requestData = {
                    plan: plan.value,
                    plaqueQty: plaqueQty,
                    customerInfo: {
                        firstName: formData.prenom,
                        lastName: formData.nom,
                        email: formData.email,
                        phone: formData.telephone
                    },
                    successUrl: `${window.location.origin}/success.html`,
                    cancelUrl: `${window.location.origin}/abonnement.html`
                };
                
                console.log('üì§ Envoi vers backend:', requestData);

                const response = await fetch(`${BACKEND_URL}/create-checkout-session`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });

                console.log('üì• R√©ponse backend:', response.status, response.statusText);

                if (!response.ok) {
                    const errorData = await response.text();
                    console.error('‚ùå Erreur backend:', errorData);
                    throw new Error(`Erreur serveur (${response.status}): ${errorData}`);
                }

                const { sessionId } = await response.json();

                // Sauvegarder les infos pour l'email de confirmation
                localStorage.setItem('qrguide_order', JSON.stringify({
                    email: formData.email,
                    name: `${formData.prenom} ${formData.nom}`,
                    amount: totalAmount,
                    planType: plan.value === 'monthly' ? 'mensuel' : 'annuel',
                    plaqueQty: plaqueQty,
                    planDetails: {
                        monthly: plan.value === 'monthly' ? '79‚Ç¨/mois' : '790‚Ç¨/an',
                        plaques: plaqueQty
                    }
                }));

                // Rediriger vers Stripe Checkout
                const result = await stripe.redirectToCheckout({ sessionId });

                if (result.error) {
                    throw new Error(result.error.message);
                }

            } catch (error) {
                console.error('‚ùå Erreur paiement:', error);
                alert('‚ùå Erreur lors du paiement : ' + error.message);
                
                // R√©activer le bouton
                paymentBtn.disabled = false;
                paymentBtn.textContent = 'üí≥ Payer maintenant';
            }
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        
        // Calcul automatique du total
        document.querySelectorAll('input[name="plan"]').forEach(radio => {
            radio.addEventListener('change', calculateTotal);
        });

        document.getElementById('plaque-quantity').addEventListener('change', calculateTotal);
        document.getElementById('plaque-quantity').addEventListener('input', calculateTotal);

        // Formulaire de paiement
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            // Rediriger directement vers le paiement Stripe
            // L'email avec identifiants sera envoy√© automatiquement par le backend apr√®s paiement
            await processPayment();
        });

        // Pre-select plan from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const planParam = urlParams.get('plan');
        if (planParam === 'abonnement') {
            document.getElementById('plan-mensuel').checked = true;
        } else if (planParam === 'creation') {
            document.getElementById('plan-complet').checked = false;
            document.getElementById('plan-mensuel').checked = true;
            document.getElementById('option-creation').checked = true;
        } else if (planParam === 'plaque') {
            document.getElementById('option-plaque').checked = true;
        } else if (planParam === 'complet') {
            document.getElementById('plan-complet').checked = true;
        }
        
        calculateTotal();
    </script>

    <script>
        // Menu mobile toggle
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        
        if (mobileMenuToggle) {
            mobileMenuToggle.addEventListener('click', function() {
                this.classList.toggle('active');
                navLinks.classList.toggle('active');
                document.body.classList.toggle('menu-open');
            });
            
            // Fermer le menu en cliquant sur un lien
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenuToggle.classList.remove('active');
                    navLinks.classList.remove('active');
                    document.body.classList.remove('menu-open');
                });
            });
        }
    </script>
</body>
</html>
